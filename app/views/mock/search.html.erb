<div class="row">
    <%= render 'full_search_box', search: @search %>
</div>
<div class="row">
    <% if @facets.length >= 1 %>
        <div id="facets" class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
            <%= @cached %>
            <% @facets.each do |facet| %>
                <%= render 'facets', facet: facet %>
            <% end %>
        </div>
        <div id="results" class="col-xs-12 col-sm-8 col-md-9 col-lg-9">
    <% else %>
        <div id="results" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <% end %>
        <% if @search.list_active == "active" %>
            <%= render 'search_list', items: @items %>
        <% else %>
            <%= render 'search_grid', items: @items %>
        <% end %>
    </div>    
</div>

<%= render 'more_results_link' %>


<script>
    bind_more_results()
</script>


<script>
    document.addEventListener('page:change', function() {
            document.getElementById('results').className += ' animated fadeInUp';
    });
    document.addEventListener('page:fetch', function() {
            document.getElementById('results').className += ' animated fadeOutDown';
    })
    
    $(document).on("submit", "form[data-turboform]", function(e) {
        Turbolinks.visit(this.action+(this.action.indexOf('?') == -1 ? '?' : '&')+$(this).serialize());
        return false;
    });
</script>

<div id="holdlogin" style="display: none">
<div><div id="loginmessage" class="alert alert-info"><i class="glyphicon glyphicon-user"></i> Log in to place hold</div></div>
<label for="holdloginuser">Username or Library Card</label>
<input type="text" id="holdloginuser" name="holdloginuser" class="form-control" />
<label for="holdloginpass" class="padtop">Password</label>
<input type="password" id="holdloginpass" name="holdloginpass" class="form-control" />
<div class="padtop">
<button type="button" class="btn btn-success loginsubmit" id="holdloginsubmit">Log in and Place Hold</button>
</div>
<div class="padtop">
<button type="button" class="btn btn-danger logincancel" id="holdlogincancel">Cancel</button>
</div>
</div>
<script>
holdbutton_click();
</script>

